/****************************************************************//**
 * @file    sw_utils.h
 * @author  Yoav Shvartz
 * @date    01.12.2023
 * 
 * @brief   This file contains general utilities
 * @details 
 * 
 * @copyright Mobile-Group. All rights reserved.
 *******************************************************************/
#ifndef _SW_UTILS_H_
#define _SW_UTILS_H_

/*******************************************************************/
/*******************************************************************/
/*                           INCLUDES                              */
/*******************************************************************/
/*******************************************************************/
#include "esp_err.h"

/*******************************************************************/
/*******************************************************************/
/*                           MACRO UTILS                           */
/*******************************************************************/
/*******************************************************************/

/*******************************************************************/
// calculate maximum value
/*******************************************************************/
#define MAX(a, b)               ((a)>(b) ? (a) : (b))

/*******************************************************************/
// Busy wait with Timeout and ESP_ERR_TIMEOUT error                                                          */
/*******************************************************************/
#define BUSY_WAIT_TIMEOUT_ERR(busy_cond, timeout)   \
{                                                   \
    uint32_t __time = timeout;                        \
                                                    \
    do                                              \
    {                                               \
        if (__time-- == 0)                          \
        {                                           \
            return ESP_ERR_TIMEOUT;                 \
        }                                           \
    } while (busy_cond);                            \
}

#endif /*_SW_UTILS_H_ */
